@model BloodTypeC.WebApp.Models.BeerViewModel
@using BloodTypeC.DAL.Models;
@using BloodTypeC.Logic.Extensions;
@using System.ComponentModel.DataAnnotations;

@{
    ViewData["Title"] = "Details";
    var maxScore = Convert.ToDouble(Model.GetAttributeFrom<RangeAttribute>(nameof(Model.Score)).Maximum);
}
<div class="products">
    <div class="product-card-details">
        <div class="beer-image-possition"><img src="~/Images/mockup.png" class="beer-image"></div>
        <h1 class="details">@Model.Name</h1>
        <div class="details-product">
            Brewery: @Model.Brewery<br>
            Style: @Model.Style<br>
            Flavors: @Model.FlavorString<br>
            Alcohol by volume: @Model.AlcoholByVolume%<br>
            Score: @Model.Score/@maxScore<br>
            <div class="buttons">
                <a asp-action="Edit" asp-route-id="@Model.Id" asp-controller="Beer">
                    <button class="product-button">Edit</button>
                </a>
                <a asp-action="Delete" asp-route-id="@Model.Id" asp-controller="Beer">
                    <button class="product-button">Delete</button>
                </a>
            </div>
            <div class="buttons">
                @if (!DB.FavoriteBeers.Any(x => x.Id == Model.Id.ToString()))
                {
                    <a asp-controller="FavoriteBeers" asp-action="AddToFavorites" asp-route-id="@Model.Id">
                        <button class="fav-button">
                            ❤ Fav it!
                        </button>
                    </a>
                }
                else
                {
                    <a asp-controller="FavoriteBeers" asp-action="RemoveFromFavorites" asp-route-id="@Model.Id">
                        <button class="fav-rem-button">
                            💔 Unfav
                        </button>
                    </a>
                }
            </div>
        </div>
    </div>
</div>

